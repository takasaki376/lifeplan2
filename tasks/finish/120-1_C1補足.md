According to a document (date not specified),本アプリのコアデータは「月次：収入・支出・資産残高・負債残高」を継続入力する前提です。

## 1) Decision（確定事項）

- **C1（プラン一覧）の MVP は「Plan が持つ情報」を主に表示**し、UI にある「世帯サマリ/今月収支/資産/負債/現行バージョン」は **一旦簡略化して OK**（=「プラン名＋最終更新＋入力状態」中心）。
- もし「今月収支/資産/負債/現行バージョン」を出すなら、あなたの想定どおり

  - **今月収支/資産/負債：`MonthlyRepository.getByYm(planId, currentYm)` から取得して表示**
  - **現行バージョン：`VersionRepo.getCurrent(planId)` で取得して表示**
    で OK（ただし C1 の実装コストと読み込み回数が増えるので、MVP は“簡略表示”を推奨）。

- **「入力が必要」判定は `MonthlyRepository.getByYm(planId, currentYm)` が `undefined` なら未入力で OK**（プラン作成直後など 0 件でも未入力扱いで問題なし）。
- **「最近更新」タブは “同じデータ集合を別ソートで見せる” で OK**

  - 「すべて」= フィルタなし（ソートは name asc でも createdAt desc でも良い）
  - 「最近更新」= `updatedAt desc`
    ※結果として「すべて」と同じ内容が並ぶことはあるが、**順序が違う**ことに意味があるので問題なし。

- 検索対象は **仕様どおり「プラン名のみ」で固定して OK**（UI の“世帯サマリ検索”は MVP では削る/無効化）。

## 2) Assumption（仮定：後で調整可能）

- Plan に `updatedAt`（なければ `versionUpdatedAt` 相当）を持っている前提で「最近更新」を実装。
- 「入力状態」は最低限、当月の月次レコードの有無で判定（詳細な ToDo 判定は D4 側で拡張）。

## 3) Design Output（C1 実装の具体方針）

- **まずは C1 を“軽く”通す**（Plan 一覧の list/search/filter/archive を確実に動かす）

  - 1 回の一覧取得：`PlanRepo.list()`（+ filter: archived, + sort）
  - 入力状態：当月だけ `MonthlyRepo.getByYm(planId, currentYm)` を（表示しているプラン分だけ）取得

    - N+1 が気になるなら `MonthlyRepo.getByYmBulk(planIds, currentYm)` を後で追加

- 表示項目（MVP おすすめ）

  - `プラン名`
  - `最終更新（updatedAt）`
  - `当月：未入力/入力済み` バッジ
  - 行アクション：開く / アーカイブ / 削除（あるなら）

- 「今月収支/資産/負債/現行バージョン」を C1 で出す場合の実装（上位版）

  - 追加取得：`MonthlyRepo.getByYm(planId, currentYm)`、`VersionRepo.getCurrent(planId)`
  - 表示：収支（income-expense）、資産残高、負債残高、Version 名/番号

## 4) Risks（リスク）

- C1 で“今月収支/資産/負債/現行バージョン”まで全部出すと、**一覧が重く**なりがち（Repo 呼び出し増、N+1 問題）。
- 「最近更新」と「すべて」が同じに見える可能性 → “すべて”のデフォルトソートを `name asc` にすると差が明確。

## 5) Next（次に作るべきもの：最短ルート）

- まずは **C1 を「プラン名＋最終更新＋入力状態＋検索（名前のみ）＋アーカイブ」**で実装開始するのが最短です。
- その後、必要になったら段階的に

  1. 当月の収支/資産/負債の表示（MonthlyRecord）
  2. 現行 Version 表示（VersionRepo）
     を追加、が安全です。
