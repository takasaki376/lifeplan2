## 1) Decision（確定事項）

### 1-1. シナリオ初期値（`src/lib/domain/defaults/scenario.ts`）

- **チケットの表の値を正として、初期値を更新して OK**です。
  現状の `conservative/base/optimistic` が「逆っぽい」ので、**C3（初期投入）のタイミングで直しておくのが安全**です。
- 更新後の初期値（あなたの提示どおり）：

  - conservative：`0.01 / 0.01 / 0.01`
  - base：`0.02 / 0.02 / 0.03`
  - optimistic：`0.03 / 0.02 / 0.05`

### 1-2. utilitiesFactor（住宅初期値）

- **0.85/1.00/0.95/1.00 に合わせて導入して OK**です。
- 型に項目が無いなら、**`src/lib/domain/types.ts` に追加し、defaults も更新して OK**です。
  この項目は既に UI・計算（光熱費の係数化）側で必要になる前提なので、ここで入れておくのが一貫します。

### 1-3. 住宅のその他初期値（`initialCostYen` など）

- **「現状のまま残す」で OK**です（MVP の実装・画面確認が安定します）。
- ただしチケット文面の「未設定許容」に寄せたいなら、**“計算に必須ではない項目は undefined 可”**にしていく方針も成立します。
  → ただ、初期値を削ると UI/計算側の `undefined` ハンドリングが増えるので、**C3 の初回は現状維持を推奨**します。

---

## 2) Assumption（仮定）

- 「チケットの表」は、MVP における **仕様の一次情報（＝正）**として扱う。
- 既存データ（すでに作成された Plan/Version）を **自動マイグレーションはしない**（新規作成分だけ新初期値）。必要なら別チケットで移行対応。

---

## 3) Design Output（実装方針・差分の入れ方）

### 3-1. `DEFAULT_SCENARIO_SET` の更新方針

- 現状コードは「保守が高く、楽観が低い」状態なので、以下へ差し替え：

  - `conservative`: wage/inflation/investment = `0.01/0.01/0.01`
  - `base`: `0.02/0.02/0.03`
  - `optimistic`: `0.03/0.02/0.05`

> 注意：フィールド名が `wageGrowthRate / inflationRate / investmentReturnRate` なら、そのまま割り当てで OK です（チケットの 3 列がそれに対応している前提）。

### 3-2. utilitiesFactor の追加（型と defaults の更新）

- `HousingAssumptions`（または該当型）に `utilitiesFactor: number` を追加
- defaults 側で住宅タイプごとに投入：

  - 高性能住宅（high_performance_home）：`0.85`
  - 一般戸建（detached）：`1.00`
  - 分譲マンション（condo）：`0.95`
  - 賃貸（rent）：`1.00`

- 計算側（簡易でも G9 でも）で、光熱費は最低限こう扱えるようにしておくと筋が通ります：

  - `utilitiesMonthly = utilitiesBaseMonthlyYen * utilitiesFactor`

### 3-3. その他初期値の扱い（ミニマム寄せのルール）

- **当面は現状維持**（値が入ってる方が画面・計算が落ちない）
- 「未設定許容」に寄せるのは次のステップが現実的：

  - (a) 計算で必須な最小セットを定義（例：購入価格、家賃、光熱ベースなど）
  - (b) それ以外は undefined を許容し、G9 側で warnings に落とす
  - (c) UI で「前提不足」表示を整備

---

## 4) Risks（リスク）

- **既存プランの初期値が“古いまま”になる**
  → MVP では許容。気になるなら「既存 Version を最新デフォルトに更新」ユースケースを別チケット化。
- `utilitiesFactor` の追加で型変更が波及
  → defaults・前提編集（G5）・計算（D5/G9）で参照箇所が増えるので、**追加 PR はコンパイルエラーで漏れが見つかる**＝むしろ早期追加が安全。

---

## 5) Next（次に作るべきもの：最短ルート）

1. `DEFAULT_SCENARIO_SET` をチケット表に合わせて修正
2. `utilitiesFactor` を型に追加 → 住宅 defaults に投入（4 タイプ）
3. 可能なら最小のユニットテスト or スナップショットで「C3 が生成する初期値」を固定（将来のブレ防止）

必要なら、`ScenarioDefaultsInput` と `HousingAssumptions` の“追加すべき型定義の具体案（どのファイルのどの型に入れるか）”も、今のコード構造に合わせて提案します。
